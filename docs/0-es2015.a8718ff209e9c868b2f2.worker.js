!function(t){var i={};function e(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(r,s,(function(i){return t[i]}).bind(null,s));return r},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s="6srL")}({"6srL":function(t,i,e){"use strict";e.r(i);class r{constructor(t,i,e){this.flagged=!1,this.mine=!1,this.x=t,this.y=i,this.value=e}hasProbability(){return void 0!==this.probability}isClosed(){return Number.isNaN(this.value)}isFlagged(){return this.flagged}isOpened(){return!this.isClosed()}isMined(){return this.mine}isUnknown(){return this.isClosed()&&!this.isMined()}setFlag(t=!0){return this.flagged=t,this}setMine(t=!0){return this.mine=t,this}}class s{constructor(t,i){this._mines=t,this._fields=i}get probabilities(){return this.fields.filter(t=>t.hasProbability()).map(t=>t.probability).reduce((t,i)=>t+i)}get probabilityMin(){const t=this.fields.map(t=>t.probability).filter((t,i,e)=>void 0!==t&&e.indexOf(t)===i);return Math.min(...t)}get randomFieldMin(){const t=this.probabilityMin,i=this.fields.filter(i=>i.probability<=t);return i[class{static randomInteger(t,i){return Math.floor(Math.random()*(i-t+1))+t}}.randomInteger(0,i.length-1)]}get fields(){return this._fields}get mines(){return this._mines}get size(){return this.fields.length}}class n{constructor(t){this.fields=[],this.init(t)}get data(){const t=this._data;return this.fieldsMined().forEach(({x:i,y:e})=>t[e][i]="*"),this._data}get height(){return this.hasFields()?this.lastY()+1:0}get size(){return this.height*this.width}get width(){return this.hasFields()?this.lastX()+1:0}field(t,i){return this.fields.find(e=>e.x===t&&e.y===i)}fieldNeighbors(t){const i=[],e=[t.y-1,t.y,t.y+1].filter(t=>t>=0);return[t.x-1,t.x,t.x+1].filter(t=>t>=0).forEach(t=>{e.forEach(e=>i.push(this.field(t,e)))}),i.filter(t=>!!t)}fieldsValuable(){return this.fields.filter(t=>t.isOpened()&&t.value>0)}fieldsMined(){return this.fields.filter(t=>t.isMined())}init(t){t&&(this._data=t,t.forEach((t,i)=>{t.forEach((t,e)=>{const s=new r(e,i,+t);"*"===t&&s.setMine(),this.fields.push(s)})}))}hasFields(){return this.fields.length>0}lastX(){return this.hasFields()&&this.fields[this.fields.length-1].x}lastY(){return this.hasFields()&&this.fields[this.fields.length-1].y}}class l{static calculate(t){const i=l.initGroups(t);return i.forEach(t=>{t.fields.forEach(i=>{i.probability=i.hasProbability()?1-(1-i.probability)*(1-t.mines/t.size):t.mines/t.size})}),l.correct(i)}static correct(t){let i;do{i=!1,t.forEach(t=>{const e=100*t.probabilities,r=100*t.mines;if(Math.abs(e-r)>1){i=!0;const s=r/e;t.fields.forEach(t=>t.probability*=s)}})}while(i);return t.forEach(t=>{t.fields.forEach(t=>{t.probability=t.probability>.99?.99:t.probability,t.probability=t.probability<0?0:t.probability})}),t}static initGroups(t){const i=[];return t.fieldsValuable().forEach(e=>{const r=t.fieldNeighbors(e),n=r.filter(t=>t&&t.isUnknown());if(n.length>0){const t=r.filter(t=>t&&t.isMined()).length;i.push(new s(e.value-t,n))}}),i}}{addEventListener("message",({data:i})=>{const e=new n(i),r=t(e);postMessage(r)});const t=t=>{const i=l.calculate(t),e=new Set;return i.forEach(t=>{t.fields.forEach(t=>{t.probability>=.9?(t.setMine(!0),e.add(t)):0===t.probability&&e.add(t)});const i=t.probabilityMin;i>0&&i<=.05&&e.add(t.randomFieldMin)}),Array.from(e)}}}});